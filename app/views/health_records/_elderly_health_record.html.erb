<% @elderly = User.find(params[:user_id]) if params[:user_id] %>
<% if @health_records.last.date == Date.today %>
  <% mood_icons = ["", "fa-regular fa-face-laugh-beam", "fa-regular fa-face-smile", "fa-regular fa-face-meh", "fa-regular fa-face-frown", "fa-regular fa-face-tired"] %>
  <div class="d-flex justify-content-center align-items-center mt-2">
    <h1 class= "col-10">Health Record - <%= @health_records.last.date.strftime('%b %d') %></h1>
    <div class="d-flex justify-content-center align-items-center">
      <%= link_to "+", new_health_record_path, class: 'add-b' %>
    </div>
  </div>
  <div class="health-record-cards">
    <div class="health-info align-items-center">
      <div class="d-flex align-items-center ms-3">
        <i class="fa-regular fa-face-meh-blank me-3" style="color: #FFB703;"></i>
        <h2 style="margin: 0px;">MOOD</h2>
      </div>
      <div style="margin-left: auto;" class="health-card-data">
        <i class="<%= mood_icons[@health_records.last.mood_status] %>" style="
    font-size: 40px;"></i>
      </div>
    </div>
    <div class="health-info align-items-center">
      <div class="d-flex align-items-center ms-3">
        <i class="fa-solid fa-circle-chevron-up me-3" style="color: #e22f22;"></i>
        <h2 style="margin: 0px;">SYS</h2>
      </div>
      <div style="margin-left: auto;" class="health-card-data"><%= @health_records.last.sys %></div>
    </div>
    <div class="health-info align-items-center">
      <div class="d-flex align-items-center ms-3">
        <i class="fa-solid fa-circle-chevron-down me-3" style="color: #0d5be3;"></i>
        <h2 style="margin: 0px;">DIA</h2>
      </div>
      <div style="margin-left: auto;" class="health-card-data"><%= @health_records.last.dia %></div>
    </div>
    <div class="health-info align-items-center">
      <div class="d-flex align-items-center ms-3">
      <i class="fa-solid fa-heart-pulse me-3" style="color: #f2392c;"></i>
      <h2 style="margin: 0px;">PULSE</h2>
      </div>
      <div style="margin-left: auto;" class="health-card-data"><%= @health_records.last.pulse %></div>
    </div>
  </div>
  <h1 class= "col-12 mt-3">Weekly</h1>
  <%= render "graph_tabs" %>
<% else %>
  <div class="flash flash-warning alert alert-dismissible fade show" role="alert">
    <span><strong>ðŸ”” <%= params[:user_id].nil? ? "You" : @elderly.first_name.capitalize %> don't have any record today</strong>
    </span>
    <a data-bs-dismiss="alert" aria-label="Close">
      <i class="fas fa-times"></i>
    </a>
  </div>
  <% mood_icons = ["", "fa-regular fa-face-laugh-beam", "fa-regular fa-face-smile", "fa-regular fa-face-meh", "fa-regular fa-face-frown", "fa-regular fa-face-tired"] %>
  <div class="d-flex justify-content-center align-items-center mt-2">
    <h1 class= "col-10">Health Record - <%= @health_records.last.date.strftime('%b %d') %></h1>
    <div class="d-flex justify-content-center align-items-center">
      <%= link_to "+", new_health_record_path, class: 'add-b' %>
    </div>
  </div>
    <div class="health-record-cards">
    <div class="health-info align-items-center">
      <div class="d-flex align-items-center ms-3">
        <i class="fa-regular fa-face-meh-blank me-3" style="color: #FFB703;"></i>
        <h2 style="margin: 0px;">MOOD</h2>
      </div>
      <div style="margin-left: auto;" class="health-card-data">
        <i class="<%= mood_icons[@health_records.last.mood_status] %>"style="
    font-size: 40px;"></i>
      </div>
    </div>
    <div class="health-info align-items-center">
      <div class="d-flex align-items-center ms-3">
        <i class="fa-solid fa-circle-chevron-up me-3" style="color: #e22f22;"></i>
        <h2 style="margin: 0px;">SYS</h2>
      </div>
      <div class="health-card-data"><%= @health_records.last.sys %></div>
    </div>
    <div class="health-info align-items-center">
      <div class="d-flex align-items-center ms-3">
        <i class="fa-solid fa-circle-chevron-down me-3" style="color: #0d5be3;"></i>
        <h2 style="margin: 0px;">DIA</h2>
      </div>
      <div style="margin-left: auto;" class="health-card-data"><%= @health_records.last.dia %></div>
    </div>
    <div class="health-info align-items-center">
      <div class="d-flex align-items-center ms-3">
      <i class="fa-solid fa-heart-pulse me-3" style="color: #f2392c;"></i>
      <h2 style="margin: 0px;">PULSE</h2>
      </div>
      <div style="margin-left: auto;" class="health-card-data"><%= @health_records.last.pulse %></div>
    </div>
  </div>
  <h1 class= "col-12 mt-3">Weekly</h1>
  <%= render "graph_tabs" %>
<% end %>
<div class="d-flex justify-content-between align-items-center mt-2">
  <%= link_to supports_path, class: "btn btn-info me-2 mb-5", style: "font-size: 24px" do %>
    <i class="fa-solid fa-arrow-left-long"></i> Back
  <% end %>
</div>
